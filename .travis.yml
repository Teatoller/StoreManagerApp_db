language: python

python:
 - "3.6"

before_install:
 - 'pip install -U pip'

install:
 - pip install -r requirements.txt

env:
 - FLASK_VERSION=1.0.2

services:
  - postgresql

before_script:
  - psql -c 'create database test_db;' -U user_1

script:
 - export APP_SETTINGS="testing"
 - coverage run --source=app -m pytest && coverage report
 
after_success:
 - coveralls